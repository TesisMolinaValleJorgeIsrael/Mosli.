<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>XRD Refinement Studio — Mini-FullProf</title>

  <link rel="stylesheet" href="css/styles.css" />
  <!-- Chart.js y plugin zoom (usa CDN, pon local si prefieres) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.2.0/dist/chartjs-plugin-zoom.min.js"></script>
</head>
<body>
  <div class="app">
    <!-- CUADRO 1: título centrado, letras grandes blancas, fondo transparente -->
    <header class="box box-title">
      <h1>XRD Refinement Studio — Mini-FullProf</h1>
    </header>

    <!-- CUADRO 2: botones subir .asr y procesado -->
    <section class="box box-controls">
      <div class="controls-row">
        <label class="file-btn">
          Subir .asr
          <input id="fileAsr" type="file" accept=".asr,.txt" />
        </label>

        <button id="btnProcess">Procesado</button>
        <button id="btnDetectPeaks">Detección de picos</button>
        <button id="btnFit">Fit</button>
        <button id="btnReset">Reset</button>
        <button id="btnDownloadChart">Descargar PNG</button>
      </div>
      <div class="small-hint">Carga tu archivo .asr y usa los botones para analizarlo.</div>
    </section>

    <!-- Main grid: CUADRO 3 (grafica) y CUADRO 6 (configuración match) -->
    <main class="main-grid">
      <!-- CUADRO 3: gráfico -->
      <section class="box box-chart">
        <div class="chart-header">
          <!-- botones rápidos sobre la gráfica -->
          <div class="chart-tools">
            <button id="panToggle">Pan (drag)</button>
            <button id="zoomOut">Zoom -</button>
            <button id="zoomIn">Zoom +</button>
            <button id="resetZoom">Reset Zoom</button>
          </div>
        </div>

        <canvas id="xrdChart"></canvas>
      </section>

      <!-- CUADRO 6: configuración para match (tabla periódica seleccionable) -->
      <aside class="box box-match">
        <h3>Selecciona elementos</h3>
        <div id="periodicGrid" class="periodic-grid" aria-label="Tabla periódica"></div>

        <div class="match-actions">
          <button id="btnGetMatches">Buscar 10 más parecidos</button>
          <div class="note">Se descargará un ZIP/CIFs para comparar picos (requiere backend).</div>
        </div>
      </aside>
    </main>

    <!-- CUADRO 4: resultados / log (debajo de la gráfica) -->
    <section class="box box-results" id="resultsPanel">
      <h4>Resultados / Log</h4>
      <pre id="logOutput" class="log"></pre>
    </section>

    <!-- CUADRO 5: imagen anima.png -->
    <aside class="box box-image">
      <img src="static/anima.png" alt="anima" />
    </aside>
  </div>

  <script src="js/app.js"></script>
</body>
</html>
